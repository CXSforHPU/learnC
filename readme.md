# C语言学习笔记

## 程序设计与C语言

```c
#include <stdio.h>      // 编译预处理指令

// int 表示返回类型
int main()              // 主函数 -- 程序入口
{
    // 要完成的功能
    printf("hello world\n"); // 函数调用
    return 0;                // 返回值为整数0
}
```

### 头文件与注释

- `#include`：包含/引用头文件
- `stdio.h`：标准输入输出头文件
- **注释方式**
  - `//`：单行注释
  - `/* ... */`：多行注释

### 格式化输出说明

| 数据类型 | 描述           |
| :------- | :------------- |
| `%d`     | 整数           |
| `%f`     | 浮点数         |
| `%c`     | 字符           |
| `%s`     | 字符串         |
| `%%`     | 输出一个百分号 |
| `%x`     | 十六进制数     |
| `%o`     | 八进制数       |
| `%u`     | 无符号整数     |
| `%e`     | 指数表示法     |

### 常见转义字符

| 转义字符 | 描述         |
| :------- | :----------- |
| `\n`     | 换行         |
| `\t`     | 制表符       |
| `\r`     | 回车         |
| `\b`     | 退格         |
| `\f`     | 换页         |
| `\'`     | 单引号       |
| `\"`     | 双引号       |
| `\\`     | 反斜杠       |
| `\0`     | 空字符       |
| `\a`     | 响铃         |
| `\v`     | 垂直制表符   |

### 比较操作示例

```c
int compare() 
{
    int a = 10, b = 20;
    if (a > b) 
        printf("a > b\n");
    else if (a < b) 
        printf("a < b\n");

    return 0;
}
```

### 使用 `scanf` 输入数据

```c
void use_scanf()
{
    int a = 0; // 如果没有赋值则为随机值
    int b = 0;

    /*
     * %d 表示要输入两个整型，加取址符号 & 表示存放的位置
     * 其中输入的格式必须和输出的格式一致
     * 输入的格式为：%d %d
     * 输入的数据为：10 20
     * 输入格式为：%d,%d
     * 输入数据为：10,20
     */
    scanf("%d %d", &a, &b); 
    compare(a, b);
}
```

### C语言程序的基本结构

1. 一个程序由一个或多个源程序文件组成。
   - 每个源文件包括三部分：
     - 预处理指令（如导入头文件、设置宏）
     - 全局声明（在函数定义之前声明变量）
     - 函数定义（需在调用前定义）

2. 函数是C语言的重要组成部分。
   - ![C语言程序结构](./picture/01C程序组成结构.png)

3. 一个函数包含两个主要部分：
   - **函数首部**
     - ![函数首部示意](./picture/02函数首部示意图.png)
   - **函数体**
     - 声明部分（如 `int max(int a, int b);`）
     - 执行部分（具体操作语句）

4. 程序中的所有操作都是通过函数中的C语句执行的。

5. 每条语句末尾必须以分号 `;` 结尾。

6. C语言本身不提供输入输出语句；这些功能由库函数提供。

7. 程序应包含适当的注释以提高可读性和维护性。

### 程序运行步骤

1. 在上位机中编写并编辑源代码。
2. 对源程序进行编译。
    1. 预编译   --      预处理
    2. 编译     --      有无语法错误 形成目标程序 xx.obj
    3. 链接     --      链接多个目标程序形成可执行程序 xx.exe(由众多.obj文件)
3. 运行程序。
> 示意图

![程序编译过程](./picture/03程序编译过程.png)

### 程序设计任务

1. 问题分析
2. 设计算法
3. 编写程序
4. 对源程序进行编辑，编译和链接
5. 运行程序，分析结果
6. 编写程序文档

### 注意事项

- 若声明变量但未初始化，则其值为随机值。
  ```c
  int a; // 值为随机
  ```

- `&` 是取地址运算符，用于获取变量的内存地址。

- 函数声明应在调用前完成，建议放在文件开头或头文件中。

- 一个工程可以包含多个源文件，它们之间可以相互调用函数。

- 一个工程中只能有一个 `main()` 函数。
  - CMake 编译时可以指定多个源文件参与编译。

## 算法 程序灵魂

1. 程序主要包含两方面信息
    1. 对数据描述
        1. 用到哪些数据
        2. 数据的组织形式
    2. 对操作的描述
        1. 所用配料
        2. 操作步骤

> 程序 = 算法 ＋ 数据结构；还需要结构化的程序设计方法

### 什么是算法

* 算法是解决 `做什么` 与 `怎么做`的问题

1. 算法分为两大类
    1. 数值运算
    2. 非数值运算

### 算法的特性

1. 有穷性
  1. 步骤是有限的，不能无限进行
2. 确定性
  1. 每个步骤都是确定的，不是含糊的，模棱两可
  2. 输入确定，输出也确定
3. 有零个或多个输入
4. 有一个或多个输出
5. 有效性

![算法特性](./picture/04算法.png) 

### 怎样表示算法

1. 自然语言表示
2. 流程图表示

![流程图](./picture/05算法流程图.png)

> 例子

![例子](./picture/06流程图例子1.png)

![例子](./picture/07流程图例子2.png)

![例子](./picture/08流程图例子3.png)

* 为了提高质量，必须限制箭头的滥用，不允许无规律的使流程随意转向，只能顺序的进行下去

#### 改善流程图弊端

1. 三种基本结构
  1. 顺序`执行/结构`
  2. 选择`执行/结构`
  3. 重复`执行/结构`
    1. while
    2. until `do while`

![循环结构](./picture/09循环结构.png)

### N-S结构化流程图

![N-S结构](./picture/10N-S结构.png)

### 伪代码表示

> 介于自然语言与计算机语言

![伪代码](./picture/11伪代码表示.png)

### 结构化程序设计方法

1. 自顶而下
2. 逐步细化
3. 模块化设计
4. 结构化编码

![结构化程序设计方法](./picture/12结构化程序设计方法.png)

* 划分子模块注意模块的独立性，耦合性越少越好


## 简单C程序设计 -- 顺序程序设计

### 数据的表现形式及其运算

* 常量
  * 整型常量
  * 实型常量
    * 十进制小数:`123.456`
    * 指数表示法:`12.34e3`
    * 字符常量
* 变量
  * 先定义再应用
* 
* C语言规定标识符只能由字母，数字，下划线3种字符组成，且第一个字符必须为字母或下划线
> 常变量与常量区别：常量是值，常变量是变量

### 数据类型

> 对数据分配存储单元的安排，包括存储单元的长度以及数据的存储形式。不同的类型分配不同的长度和存储形式

#### 1. 基本数据类型（Basic Data Types）

##### 整型（Integer Types）
| 类型 | 关键字 | 大小（通常） | 范围 |
|------|--------|-------------|------|
| 短整型 | `short` 或 `short int` | 2字节 | -32,768 到 32,767 |
| 整型 | `int` | 4字节 | -2,147,483,648 到 2,147,483,647 |
| 长整型 | `long` 或 `long int` | 4字节（32位）或8字节（64位） | 取决于平台 |
| 长长整型 | `long long` 或 `long long int` | 8字节 | -2^63 到 2^63-1 |

##### 字符型（Character Types）
| 类型 | 关键字 | 大小 | 范围 |
|------|--------|------|------|
| 字符型 | `char` | 1字节 | -128 到 127 或 0 到 255 |
| 无符号字符型 | `unsigned char` | 1字节 | 0 到 255 |

##### 浮点型（Floating-Point Types）
| 类型 | 关键字 | 大小 | 范围 | 精度 |
|------|--------|------|------|------|
| 单精度浮点型 | `float` | 4字节 | ±3.4E+38 | 6-7位小数 |
| 双精度浮点型 | `double` | 8字节 | ±1.7E+308 | 15-16位小数 |
| 长双精度浮点型 | `long double` | 10/12/16字节 | 取决于平台 | 取决于平台 |

##### 无符号整型（Unsigned Integer Types）
| 类型 | 关键字 | 大小 | 范围 |
|------|--------|------|------|
| 无符号短整型 | `unsigned short` | 2字节 | 0 到 65,535 |
| 无符号整型 | `unsigned int` 或 `unsigned` | 4字节 | 0 到 4,294,967,295 |
| 无符号长整型 | `unsigned long` | 4/8字节 | 0 到 2^32-1 或 2^64-1 |
| 无符号长长整型 | `unsigned long long` | 8字节 | 0 到 2^64-1 |

#### 2. 构造数据类型（Derived Data Types）

##### 数组（Array）
- 一组相同类型数据的集合
- 示例：`int arr[10];`

##### 结构体（Structure）
- 不同类型数据的集合
- 示例：
```c
struct Student {
    int id;
    char name[20];
    float score;
};
```

##### 共用体（Union）
- 共享内存的不同类型数据
- 示例：
```c
union Data {
    int i;
    float f;
    char str[20];
};
```

##### 枚举（Enumeration）
- 定义一组命名的整型常量
- 示例：
```c
enum Color {RED, GREEN, BLUE};
```

#### 3. 指针类型（Pointer Types）
- 存储内存地址的类型
- 示例：
```c
int *ptr;        // 整型指针
char *str;       // 字符指针
void *vptr;      // 通用指针
```

#### 4. 空类型（Void Type）
- `void` 表示无类型
- 常用于函数返回值或参数声明
- 示例：
```c
void function(void);  // 无参数无返回值函数
void *ptr;            // 通用指针
```

#### 5. 限定符（Type Qualifiers）

##### const
- 声明常量，值不可修改
- 示例：`const int MAX = 100;`

##### volatile
- 告诉编译器该变量可能被意外改变
- 示例：`volatile int flag;`

##### restrict（C99）
- 用于指针，表示唯一访问该对象的方式
- 示例：`int *restrict ptr;`

#### 格式化输出对应关系


| 数据类型 | 格式说明符 | 描述 |
|---------|-----------|------|
| int | `%d` | 整数 |
| float | `%f` | 浮点数 |
| char | `%c` | 字符 |
| char* | `%s` | 字符串 |
| int | `%x` | 十六进制数 |
| int | `%o` | 八进制数 |
| unsigned int | `%u` | 无符号整数 |
| float | `%e` | 指数表示法 |

> 注意：实际的数据类型大小可能因编译器和平台而异，可以使用`sizeof`运算符来获取特定平台上的大小。



## 关键字
```c
continue; 跳过本次循环
break;终止循环
system("pause"); // 执行系统命令

```