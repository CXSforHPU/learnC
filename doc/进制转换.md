# 进制转换详解

## 各进制表示方法

| 进制 | 前缀 | 示例 | 说明 |
|------|------|------|------|
| 二进制 | `0b` 或 `0B` | `0b1010` | 只包含0和1 |
| 八进制 | `0` | `012` | 以0开头，包含0-7 |
| 十进制 | 无 | `10` | 包含0-9 |
| 十六进制 | `0x` 或 `0X` | `0xA` | 以0x开头，包含0-9和A-F |

## 进制转换方法

## 1. 二进制与其他进制转换

### 二进制转十进制
按权展开求和：
```c
// 二进制 1010 转十进制
1*2^3 + 0*2^2 + 1*2^1 + 0*2^0 = 8 + 0 + 2 + 0 = 10
```

### 二进制转八进制
每3位二进制数对应1位八进制数：
```c
// 二进制 101010 转八进制
// 分组: 101 010
// 转换: 5   2
// 结果: 052
```

### 二进制转十六进制
每4位二进制数对应1位十六进制数：
```c
// 二进制 101010 转十六进制
// 分组: 0010 1010 (高位补0)
// 转换: 2    A
// 结果: 0x2A
```

## 2. 十进制与其他进制转换

### 十进制转二进制（除2取余法）
```c
// 十进制 10 转二进制
10 ÷ 2 = 5 余 0
5  ÷ 2 = 2 余 1
2  ÷ 2 = 1 余 0
1  ÷ 2 = 0 余 1
// 从下往上读取余数: 1010
```

### 十进制转八进制（除8取余法）
```c
// 十进制 10 转八进制
10 ÷ 8 = 1 余 2
1  ÷ 8 = 0 余 1
// 从下往上读取余数: 012
```

### 十进制转十六进制（除16取余法）
```c
// 十进制 10 转十六进制
10 ÷ 16 = 0 余 10 (A)
// 结果: 0xA
```

## C语言中的进制表示和转换

## 1. 不同进制的字面量表示
```c
#include <stdio.h>

int main() {
    int binary = 0b1010;    // 二进制 (C标准可能不支持)
    int octal = 012;        // 八进制
    int decimal = 10;       // 十进制
    int hex = 0xA;          // 十六进制
    
    printf("二进制1010: %d\n", binary);
    printf("八进制12: %d\n", octal);
    printf("十进制10: %d\n", decimal);
    printf("十六进制A: %d\n", hex);
    
    return 0;
}
```

## 2. 格式化输出不同进制
```c
#include <stdio.h>

int main() {
    int num = 10;
    
    printf("十进制: %d\n", num);
    printf("八进制: %o\n", num);
    printf("十六进制: %x\n", num);
    printf("十六进制(大写): %X\n", num);
    
    // 指定前缀
    printf("带前缀八进制: %#o\n", num);
    printf("带前缀十六进制: %#x\n", num);
    
    return 0;
}
```

## 3. 手动实现进制转换函数
```c
#include <stdio.h>

// 十进制转二进制字符串
void decToBinary(int n) {
    if (n > 1) {
        decToBinary(n / 2);
    }
    printf("%d", n % 2);
}

// 十进制转任意进制(2-16)
void decToBase(int n, int base) {
    if (n >= base) {
        decToBase(n / base, base);
    }
    
    int remainder = n % base;
    if (remainder < 10) {
        printf("%d", remainder);
    } else {
        printf("%c", 'A' + remainder - 10);
    }
}

int main() {
    int num = 10;
    
    printf("十进制 %d 转二进制: ", num);
    decToBinary(num);
    printf("\n");
    
    printf("十进制 %d 转八进制: ", num);
    decToBase(num, 8);
    printf("\n");
    
    printf("十进制 %d 转十六进制: ", num);
    decToBase(num, 16);
    printf("\n");
    
    return 0;
}
```

## 常用进制转换对照表

| 十进制 | 二进制 | 八进制 | 十六进制 |
|--------|--------|--------|----------|
| 0 | 0000 | 00 | 0x0 |
| 1 | 0001 | 01 | 0x1 |
| 2 | 0010 | 02 | 0x2 |
| 3 | 0011 | 03 | 0x3 |
| 4 | 0100 | 04 | 0x4 |
| 5 | 0101 | 05 | 0x5 |
| 6 | 0110 | 06 | 0x6 |
| 7 | 0111 | 07 | 0x7 |
| 8 | 1000 | 10 | 0x8 |
| 9 | 1001 | 11 | 0x9 |
| 10 | 1010 | 12 | 0xA |
| 15 | 1111 | 17 | 0xF |
| 16 | 10000 | 20 | 0x10 |

## 实际应用示例
```c
#include <stdio.h>

int main() {
    // 以不同进制形式表示同一个数值
    int value1 = 10;      // 十进制
    int value2 = 012;     // 八进制
    int value3 = 0xA;     // 十六进制
    
    printf("所有值都相等: %d %d %d\n", value1, value2, value3);
    printf("以不同进制显示:\n");
    printf("十进制: %d\n", value1);
    printf("八进制: %o\n", value1);
    printf("十六进制: %x\n", value1);
    
    return 0;
}
```

以上就是二进制、十进制、八进制和十六进制之间的转换方法和在C语言中的应用。

## 小数进制转换方式

小数的进制转换与整数不同，需要分别处理整数部分和小数部分。

### 1. 十进制小数转换为其他进制

#### 十进制小数转二进制（乘2取整法）

对小数部分不断乘以2，取整数部分作为二进制位，直到小数部分为0或达到精度要求：

```c
// 十进制 0.625 转二进制
0.625 × 2 = 1.25  → 取整数部分 1
0.25  × 2 = 0.5   → 取整数部分 0
0.5   × 2 = 1.0   → 取整数部分 1
// 结果: 0.101
```

#### 十进制小数转八进制（乘8取整法）

```c
// 十进制 0.625 转八进制
0.625 × 8 = 5.0   → 取整数部分 5
// 结果: 0.5
```

#### 十进制小数转十六进制（乘16取整法）

```c
// 十进制 0.625 转十六进制
0.625 × 16 = 10.0 → 取整数部分 10 (A)
// 结果: 0.A
```

### 2. 其他进制小数转换为十进制

#### 二进制小数转十进制

按权展开求和，小数部分权重为负次幂：

```c
// 二进制 0.101 转十进制
1×2^(-1) + 0×2^(-2) + 1×2^(-3) = 0.5 + 0 + 0.125 = 0.625
```

#### 八进制小数转十进制

```c
// 八进制 0.5 转十进制
5×8^(-1) = 5×0.125 = 0.625
```

#### 十六进制小数转十进制

```c
// 十六进制 0.A 转十进制
10×16^(-1) = 10×0.0625 = 0.625
```

### 3. C语言中小数进制转换示例

```c
#include <stdio.h>
#include <math.h>

// 十进制小数转二进制小数（指定精度）
void decToBinaryFloat(double num, int precision) {
    printf("十进制 %.6f 转二进制: ", num);
    
    // 处理整数部分
    int integerPart = (int)num;
    double fractionalPart = num - integerPart;
    
    // 输出整数部分的二进制
    if (integerPart == 0) {
        printf("0.");
    } else {
        // 这里简化处理，实际应该实现整数转二进制
        printf("%d.", integerPart);
    }
    
    // 处理小数部分
    for (int i = 0; i < precision; i++) {
        fractionalPart *= 2;
        int bit = (int)fractionalPart;
        printf("%d", bit);
        fractionalPart -= bit;
        
        if (fractionalPart == 0) break;
    }
    printf("\n");
}

// 二进制小数转十进制
double binaryToDecFloat(const char* binary) {
    double result = 0.0;
    int pointIndex = -1;
    
    // 找到小数点位置
    for (int i = 0; binary[i] != '\0'; i++) {
        if (binary[i] == '.') {
            pointIndex = i;
            break;
        }
    }
    
    if (pointIndex == -1) pointIndex = strlen(binary);
    
    // 处理整数部分
    for (int i = 0; i < pointIndex; i++) {
        if (binary[i] == '1') {
            result += pow(2, pointIndex - 1 - i);
        }
    }
    
    // 处理小数部分
    for (int i = pointIndex + 1; binary[i] != '\0'; i++) {
        if (binary[i] == '1') {
            result += pow(2, pointIndex - i);
        }
    }
    
    return result;
}

int main() {
    // 十进制小数转二进制示例
    decToBinaryFloat(0.625, 10);
    decToBinaryFloat(0.1, 10);  // 会出现无限循环
    
    // 二进制小数转十进制示例
    printf("二进制 0.101 转十进制: %.6f\n", binaryToDecFloat("0.101"));
    printf("二进制 101.101 转十进制: %.6f\n", binaryToDecFloat("101.101"));
    
    return 0;
}
```

### 4. 特殊情况说明

#### 1. 无限循环小数

有些十进制小数在转换为二进制时会出现无限循环：

```c
// 十进制 0.1 转二进制
0.1 × 2 = 0.2  → 0
0.2 × 2 = 0.4  → 0
0.4 × 2 = 0.8  → 0
0.8 × 2 = 1.6  → 1
0.6 × 2 = 1.2  → 1
0.2 × 2 = 0.4  → 0 (开始循环)
// 结果: 0.0001100110011...
```

#### 2. 精度问题

在计算机中，浮点数表示有精度限制，可能导致转换结果不准确：

```c
#include <stdio.h>

int main() {
    float f = 0.1f;
    double d = 0.1;
    
    printf("float 0.1:  %.20f\n", f);
    printf("double 0.1: %.20f\n", d);
    
    return 0;
}
```

### 5. 常用小数进制转换对照表

| 十进制 | 二进制 | 八进制 | 十六进制 |
|--------|--------|--------|----------|
| 0.125 | 0.001 | 0.1 | 0.2 |
| 0.25 | 0.01 | 0.2 | 0.4 |
| 0.375 | 0.011 | 0.3 | 0.6 |
| 0.5 | 0.1 | 0.4 | 0.8 |
| 0.625 | 0.101 | 0.5 | 0.A |
| 0.75 | 0.11 | 0.6 | 0.C |
| 0.875 | 0.111 | 0.7 | 0.E |

### 6. 实际应用示例

```c
#include <stdio.h>

int main() {
    // 不同进制小数表示相同数值
    float dec = 0.5f;        // 十进制
    // 二进制表示: 0.1
    // 八进制表示: 0.4
    // 十六进制表示: 0.8
    
    printf("十进制 0.5: %.10f\n", dec);
    printf("以不同进制理解:\n");
    printf("二进制: 0.1 (1×2^(-1) = 0.5)\n");
    printf("八进制: 0.4 (4×8^(-1) = 0.5)\n");
    printf("十六进制: 0.8 (8×16^(-1) = 0.5)\n");
    
    return 0;
}
```

小数进制转换的关键在于：
1. 整数部分和小数部分分别转换
2. 小数部分采用"乘基取整"的方法
3. 注意精度问题和无限循环小数的处理